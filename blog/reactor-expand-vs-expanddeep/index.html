<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=siteBaseUrl content="https://www.maoudia.com/"><meta name=author content="Moncef AOUDIA"><meta name=description content="Moncef AOUDIA's website"><meta name=keywords content="blog,personal,programming,java,graphql,springboot,quarkus,reactor,camel,apollo,opensource,multilingual"><link href=https://github.com/aoudiamoncef rel=me><link rel=webmention href=https://webmention.io/www.maoudia.com/webmention><link rel=pingback href=https://webmention.io/www.maoudia.com/xmlrpc><meta name=generator content="Hugo 0.152.0"><noscript><meta http-equiv=refresh content="0; url=https://www.maoudia.com/blog/reactor-expand-vs-expanddeep/"></noscript><title>Reactor Expand vs ExpandDeep: Directory Traversal Strategies | Moncef AOUDIA</title><meta name=description content="Understand the difference between breadth-first and depth-first traversal using Reactor's expand and expandDeep operators for reactive directory exploration."><meta itemprop=name content="Reactor Expand vs ExpandDeep: Directory Traversal Strategies"><meta itemprop=description content="Understand the difference between breadth-first and depth-first traversal using Reactor's expand and expandDeep operators for reactive directory exploration."><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@AoudiaMoncef"><meta name=twitter:title content="Reactor Expand vs ExpandDeep: Directory Traversal Strategies"><meta name=twitter:image content><meta name=twitter:image:src content><meta name=twitter:creator content="@AoudiaMoncef"><meta property="og:title" content="Reactor Expand vs ExpandDeep: Directory Traversal Strategies"><meta property="og:description" content="Understand the difference between breadth-first and depth-first traversal using Reactor's expand and expandDeep operators for reactive directory exploration."><meta property="og:type" content="article"><meta property="og:url" content="https://www.maoudia.com/blog/reactor-expand-vs-expanddeep/"><meta property="og:image" content="https://www.maoudia.com/images/blog/reactor-expand-vs-expanddeep/featured-image-en.svg"><meta property="og:image:secure_url" content="https://www.maoudia.com/images/blog/reactor-expand-vs-expanddeep/featured-image-en.svg"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content><meta property="og:image:height" content><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-04-10T00:00:00+02:00"><meta property="article:modified_time" content="2025-12-02T11:09:10+01:00"><meta property="og:locale" content="en"><meta property="og:locale:alternate" content="fr"><head><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon-180x180.webp><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.webp><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.webp><link rel=manifest href=/manifest.json crossorigin=use-credentials><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg color=#5bbad5><meta name=apple-mobile-web-app-title content="https://www.maoudia.com"><meta name=application-name content="https://www.maoudia.com"><meta name=msapplication-TileColor content="#00a300"><meta name=theme-color media="(prefers-color-scheme: light)" content="white"><meta name=theme-color media="(prefers-color-scheme: dark)" content="black"></head><link rel=preload as=script href=https://www.maoudia.com/js/modernizr-simple.min.js><script src=/js/modernizr-simple.min.js></script><link href=https://www.maoudia.com/index.xml rel=alternate type=application/rss+xml title="Moncef AOUDIA"><link href=https://www.maoudia.com/blog/index.xml rel=feed type=application/rss+xml title="Moncef AOUDIA Blog"><link rel=canonical href=https://www.maoudia.com/blog/reactor-expand-vs-expanddeep/><link rel=preload as=script href=https://www.maoudia.com/js/theme.min.js crossorigin=anonymous><link rel=stylesheet href=https://www.maoudia.com/css/theme.min.css><link rel=stylesheet href=https://www.maoudia.com/css/main.min.css integrity></head><body class=bilberry-hugo-theme><nav class=permanentTopNav><div class=container><ul class=topnav><li><a href=https://www.maoudia.com/uses/>Uses</a></li><li><a href=https://www.maoudia.com/about/>About</a></li></ul><div id=search-box class=search><i class="fas fa-search"></i>
<input id=search type=text placeholder="Search ..."></div></div></nav><header><div class=container><div class=logo><a href=https://www.maoudia.com/ class=logo><img src=/images/logo.png width=512 height=512 alt="Moncef AOUDIA logo">
<span class=overlay><i class="fa fa-home"></i></span></a></div><div class=titles><h3 class=title><a href=/about/>Moncef AOUDIA</a></h3></div><div class=languages><a href=https://www.maoudia.com/ class=active>en</a>
<span>| </span><a href=https://www.maoudia.com/fr/>fr</a></div><div class="toggler permanentTopNav"><i class="fa fa-bars" aria-hidden=true></i></div></div></header><div class="main container"><div class="article-wrapper u-cf single"><article class="default article"><div class="featured-image webfeedsFeaturedVisual"><a href=https://www.maoudia.com/blog/reactor-expand-vs-expanddeep/ alt="article with featured image"><img src=/images/blog/reactor-expand-vs-expanddeep/featured-image-en.svg width=1200 height=600 alt="featured image"></a></div><div class=content><h1 class=article-title><a href=https://www.maoudia.com/blog/reactor-expand-vs-expanddeep/>Reactor Expand vs ExpandDeep: Directory Traversal Strategies</a></h1><div class=meta><span>Published on </span><span class=date>2024-04-10</span>
<span>| </span><span>Updated on </span><span class=date>2025-12-02</span>
<span>| </span><span class=readingTime>8 mins read</span>
<span>| </span><span class=categories><a href=https://www.maoudia.com/categories/tutorial/>Tutorial</a>
<a href=https://www.maoudia.com/categories/reactive-programming/>Reactive Programming</a></span></div><div class="paragraph lead"><p>When exploring directory structures in a reactive programming environment, the strategies of breadth-first and depth-first traversal play a crucial role. This guide explores how to use Reactor’s <code>expand</code> and <code>expandDeep</code> operators to traverse and emit paths in a reactive stream.</p></div><div id=toc class=toc><div id=toctitle class=title>Table of contents</div><ul class=sectlevel1><li><a href=#_overview>1. Overview</a></li><li><a href=#_traversal_strategies>2. Traversal Strategies</a></li><li><a href=#_project_setup>3. Project Setup</a></li><li><a href=#_implementation>4. Implementation</a></li><li><a href=#_testing>5. Testing</a></li><li><a href=#_use_cases_and_recommendations>6. Use Cases and Recommendations</a></li><li><a href=#_best_practices>7. Best Practices</a></li><li><a href=#_performance_considerations>8. Performance Considerations</a></li><li><a href=#_comparison_summary>9. Comparison Summary</a></li><li><a href=#_conclusion>10. Conclusion</a></li><li><a href=#_resources>11. Resources</a></li></ul></div><div class=sect1><h2 id=_overview>1. Overview</h2><div class=sectionbody><div class=paragraph><p>Project Reactor provides two powerful operators for recursive exploration: <code>expand</code> (breadth-first) and <code>expandDeep</code> (depth-first). These operators are particularly useful when working with hierarchical structures like file systems, where you need to traverse directories and process files reactively.</p></div><div class=paragraph><p>The <code>ReactorFileUtils</code> class demonstrates practical implementations of both strategies for exploring directory structures in a non-blocking, reactive manner.</p></div></div></div><div class=sect1><h2 id=_traversal_strategies>2. Traversal Strategies</h2><div class=sectionbody><div class=sect2><h3 id=_breadth_first_traversal>2.1. Breadth-First Traversal</h3><div class=paragraph><p>Breadth-first traversal explores a tree structure level by level, processing all nodes at the current depth before moving to the next level.</p></div><div id=breadth-first-tree class=listingblock><div class=content><pre>Failed to generate image: mmdc failed:
Error: Failed to launch the browser process!
[1202/110534.531898:FATAL:zygote_host_impl_linux.cc(128)] No usable sandbox! If you are running on Ubuntu 23.10+ or another Linux distro that has disabled unprivileged user namespaces with AppArmor, see https://chromium.googlesource.com/chromium/src/+/main/docs/security/apparmor-userns-restrictions.md. Otherwise see https://chromium.googlesource.com/chromium/src/+/main/docs/linux/suid_sandbox_development.md for more information on developing with the (older) SUID sandbox. If you want to live dangerously and need an immediate workaround, you can try using --no-sandbox.


TROUBLESHOOTING: https://pptr.dev/troubleshooting

    at Interface.onClose (file:///home/runner/work/www.maoudia.com/www.maoudia.com/node_modules/@puppeteer/browsers/lib/esm/launch.js:303:24)
    at Interface.emit (node:events:539:35)
    at Interface.close (node:readline:586:8)
    at Socket.onend (node:readline:277:10)
    at Socket.emit (node:events:539:35)
    at endReadableNT (node:internal/streams/readable:1345:12)
    at processTicksAndRejections (node:internal/process/task_queues:83:21)


%%{init: {&#39;theme&#39;:&#39;neutral&#39;, &#39;themeVariables&#39;: { &#39;fontSize&#39;:&#39;18px&#39;}}}%%
graph TB
    A[&#34;A&lt;br/&gt;(Level 0)&#34;]
    B[&#34;B&lt;br/&gt;(Level 1)&#34;]
    C[&#34;C&lt;br/&gt;(Level 1)&#34;]
    D[&#34;D&lt;br/&gt;(Level 2)&#34;]
    E[&#34;E&lt;br/&gt;(Level 2)&#34;]
    F[&#34;F&lt;br/&gt;(Level 2)&#34;]
    G[&#34;G&lt;br/&gt;(Level 2)&#34;]

    A --&gt; B
    A --&gt; C
    B --&gt; D
    B --&gt; E
    C --&gt; F
    C --&gt; G

    Order[&#34;&lt;b&gt;Traversal Order:&lt;/b&gt;&lt;br/&gt;A → B → C → D → E → F → G&#34;]

    classDef level0 fill:#2563eb,stroke:#1e40af,color:#fff,stroke-width:3px
    classDef level1 fill:#10b981,stroke:#059669,color:#fff,stroke-width:2px
    classDef level2 fill:#f59e0b,stroke:#d97706,color:#fff,stroke-width:2px
    classDef info fill:#f3f4f6,stroke:#9ca3af,color:#111,stroke-width:2px

    class A level0
    class B,C level1
    class D,E,F,G level2
    class Order info</pre></div></div><div class=sect3><h4 id=_characteristics>2.1.1. Characteristics</h4><div class=ulist><ul><li><p><strong>Starting Point:</strong> Begins with the root directory path</p></li><li><p><strong>Exploration:</strong> Checks if the path is a directory, lists immediate child paths, and emits them level by level</p></li><li><p><strong>Processing Order:</strong> Processes all immediate neighbors before moving deeper</p></li><li><p><strong>Use Case:</strong> Useful when you need to process directories closest to the root first</p></li></ul></div></div><div class=sect3><h4 id=_example>2.1.2. Example</h4><div class=paragraph><p>For a directory structure <code>A → B, C → D, E</code>, the exploration order is:</p></div><div class="olist arabic"><ol class=arabic><li><p>A (root)</p></li><li><p>B, C (level 1)</p></li><li><p>D, E (level 2)</p></li></ol></div></div></div><div class=sect2><h3 id=_depth_first_traversal>2.2. Depth-First Traversal</h3><div class=paragraph><p>Depth-first traversal explores a tree structure by going as deep as possible along each branch before backtracking.</p></div><div id=depth-first-tree class=listingblock><div class=content><pre>Failed to generate image: mmdc failed:
Error: Failed to launch the browser process!
[1202/110535.018324:FATAL:zygote_host_impl_linux.cc(128)] No usable sandbox! If you are running on Ubuntu 23.10+ or another Linux distro that has disabled unprivileged user namespaces with AppArmor, see https://chromium.googlesource.com/chromium/src/+/main/docs/security/apparmor-userns-restrictions.md. Otherwise see https://chromium.googlesource.com/chromium/src/+/main/docs/linux/suid_sandbox_development.md for more information on developing with the (older) SUID sandbox. If you want to live dangerously and need an immediate workaround, you can try using --no-sandbox.


TROUBLESHOOTING: https://pptr.dev/troubleshooting

    at Interface.onClose (file:///home/runner/work/www.maoudia.com/www.maoudia.com/node_modules/@puppeteer/browsers/lib/esm/launch.js:303:24)
    at Interface.emit (node:events:539:35)
    at Interface.close (node:readline:586:8)
    at Socket.onend (node:readline:277:10)
    at Socket.emit (node:events:539:35)
    at endReadableNT (node:internal/streams/readable:1345:12)
    at processTicksAndRejections (node:internal/process/task_queues:83:21)


%%{init: {&#39;theme&#39;:&#39;neutral&#39;, &#39;themeVariables&#39;: { &#39;fontSize&#39;:&#39;18px&#39;}}}%%
graph TB
    A[&#34;A&lt;br/&gt;(Start)&#34;]
    B[&#34;B&lt;br/&gt;(Branch 1)&#34;]
    C[&#34;C&lt;br/&gt;(Branch 2)&#34;]
    D[&#34;D&lt;br/&gt;(Deep 1)&#34;]
    E[&#34;E&lt;br/&gt;(Deep 2)&#34;]
    F[&#34;F&lt;br/&gt;(Deep 3)&#34;]
    G[&#34;G&lt;br/&gt;(Deep 4)&#34;]

    A --&gt; B
    A --&gt; C
    B --&gt; D
    B --&gt; E
    C --&gt; F
    C --&gt; G

    Order[&#34;&lt;b&gt;Traversal Order:&lt;/b&gt;&lt;br/&gt;A → B → D → E → C → F → G&#34;]

    classDef root fill:#2563eb,stroke:#1e40af,color:#fff,stroke-width:3px
    classDef branch fill:#7B68EE,stroke:#5C4DB8,color:#fff,stroke-width:2px
    classDef deep fill:#f59e0b,stroke:#d97706,color:#fff,stroke-width:2px
    classDef info fill:#f3f4f6,stroke:#9ca3af,color:#111,stroke-width:2px

    class A root
    class B,C branch
    class D,E,F,G deep
    class Order info</pre></div></div><div class=sect3><h4 id=_characteristics_2>2.2.1. Characteristics</h4><div class=ulist><ul><li><p><strong>Starting Point:</strong> Starts with the root directory path</p></li><li><p><strong>Exploration:</strong> Checks if the path is a directory, lists immediate child paths, and recursively explores each branch completely</p></li><li><p><strong>Processing Order:</strong> Goes as deep as possible before backtracking</p></li><li><p><strong>Use Case:</strong> Useful for fully exploring specific branches before moving on</p></li></ul></div></div><div class=sect3><h4 id=_example_2>2.2.2. Example</h4><div class=paragraph><p>For a directory structure <code>A → B, C → D, E</code>, the exploration order is:</p></div><div class="olist arabic"><ol class=arabic><li><p>A (root)</p></li><li><p>B (first branch)</p></li><li><p>D, E (explore B’s children completely)</p></li><li><p>C (backtrack and move to second branch)</p></li></ol></div></div></div></div></div><div class=sect1><h2 id=_project_setup>3. Project Setup</h2><div class=sectionbody><div class=sect2><h3 id=_requirements>3.1. Requirements</h3><div class=ulist><ul><li><p><a href=https://adoptium.net/><code>OpenJDK 21.0.x or higher</code></a></p></li><li><p><a href=https://maven.apache.org/><code>Maven 3.6.x or higher</code></a></p></li><li><p><a href=https://projectreactor.io/><code>Project Reactor 3.6.x</code></a></p></li></ul></div></div><div class=sect2><h3 id=_maven_configuration>3.2. Maven Configuration</h3><div class=listingblock><div class=title>pom.xml</div><div class=content><pre class="rouge highlight"><code data-lang=xml><table class=linenotable><tbody><tr><td class="linenos gl"><pre class=lineno> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class=code><pre><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class=nt>&lt;project</span> <span class=na>xmlns:xsi=</span><span class=s>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span class=na>xmlns=</span><span class=s>&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
         <span class=na>xsi:schemaLocation=</span><span class=s>&#34;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;modelVersion&gt;</span>4.0.0<span class=nt>&lt;/modelVersion&gt;</span>
    <span class=nt>&lt;groupId&gt;</span>com.maoudia.lib<span class=nt>&lt;/groupId&gt;</span>
    <span class=nt>&lt;artifactId&gt;</span>app<span class=nt>&lt;/artifactId&gt;</span>
    <span class=nt>&lt;version&gt;</span>0.0.1-SNAPSHOT<span class=nt>&lt;/version&gt;</span>
    <span class=nt>&lt;name&gt;</span>maoudia-lib<span class=nt>&lt;/name&gt;</span>
    <span class=nt>&lt;description&gt;</span>MAOUDIA LIB<span class=nt>&lt;/description&gt;</span>

    <span class=nt>&lt;properties&gt;</span>
        <span class=nt>&lt;java.version&gt;</span>21<span class=nt>&lt;/java.version&gt;</span>
    <span class=nt>&lt;/properties&gt;</span>

    <span class=nt>&lt;dependencies&gt;</span>
        <span class=nt>&lt;dependency&gt;</span>
            <span class=nt>&lt;groupId&gt;</span>io.projectreactor<span class=nt>&lt;/groupId&gt;</span>
            <span class=nt>&lt;artifactId&gt;</span>reactor-core<span class=nt>&lt;/artifactId&gt;</span>
            <span class=nt>&lt;version&gt;</span>3.6.2<span class=nt>&lt;/version&gt;</span>
        <span class=nt>&lt;/dependency&gt;</span>

        <span class=nt>&lt;dependency&gt;</span>
            <span class=nt>&lt;groupId&gt;</span>io.projectreactor<span class=nt>&lt;/groupId&gt;</span>
            <span class=nt>&lt;artifactId&gt;</span>reactor-test<span class=nt>&lt;/artifactId&gt;</span>
            <span class=nt>&lt;version&gt;</span>3.6.2<span class=nt>&lt;/version&gt;</span>
            <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
        <span class=nt>&lt;/dependency&gt;</span>
    <span class=nt>&lt;/dependencies&gt;</span>
<span class=nt>&lt;/project&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div></div></div></div><div class=sect1><h2 id=_implementation>4. Implementation</h2><div class=sectionbody><div class=sect2><h3 id=_reactorfileutils_class>4.1. ReactorFileUtils Class</h3><div class=paragraph><p>This utility class provides reactive file operations using Project Reactor.</p></div><div class=listingblock><div class=title>ReactorFileUtils.java</div><div class=content><pre class="rouge highlight"><code data-lang=java><table class=linenotable><tbody><tr><td class="linenos gl"><pre class=lineno> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class=code><pre><span class=kn>package</span> <span class=nn>com.maoudia</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>jakarta.validation.constraints.NotNull</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>reactor.core.publisher.Flux</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>reactor.core.publisher.Mono</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>reactor.util.annotation.NonNull</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.io.File</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.Files</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.Path</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ReactorFileUtils</span> <span class=o>{</span>

    <span class=nd>@NotNull</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=nf>expand</span><span class=o>(</span><span class=nd>@NonNull</span> <span class=nc>Path</span> <span class=n>path</span><span class=o>)</span> <span class=o>{</span> <i class=conum data-value=1></i><b>(1)</b>
        <span class=k>return</span> <span class=nc>Mono</span><span class=o>.</span><span class=na>justOrEmpty</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
                <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=nl>Files:</span><span class=o>:</span><span class=n>isDirectory</span><span class=o>)</span>
                <span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=nl>ReactorFileUtils:</span><span class=o>:</span><span class=n>listPaths</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@NotNull</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=nf>expandDeep</span><span class=o>(</span><span class=nd>@NonNull</span> <span class=nc>Path</span> <span class=n>path</span><span class=o>)</span> <span class=o>{</span> <i class=conum data-value=2></i><b>(2)</b>
        <span class=k>return</span> <span class=nc>Mono</span><span class=o>.</span><span class=na>justOrEmpty</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
                <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=nl>Files:</span><span class=o>:</span><span class=n>isDirectory</span><span class=o>)</span>
                <span class=o>.</span><span class=na>expandDeep</span><span class=o>(</span><span class=nl>ReactorFileUtils:</span><span class=o>:</span><span class=n>listPaths</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@NotNull</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=nf>listPaths</span><span class=o>(</span><span class=nd>@NonNull</span> <span class=nc>Path</span> <span class=n>path</span><span class=o>)</span> <span class=o>{</span> <i class=conum data-value=3></i><b>(3)</b>
        <span class=k>return</span> <span class=nc>Mono</span><span class=o>.</span><span class=na>justOrEmpty</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
                <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=nl>Files:</span><span class=o>:</span><span class=n>isDirectory</span><span class=o>)</span>
                <span class=o>.</span><span class=na>mapNotNull</span><span class=o>(</span><span class=n>directory</span> <span class=o>-&gt;</span> <span class=n>directory</span><span class=o>.</span><span class=na>toFile</span><span class=o>().</span><span class=na>listFiles</span><span class=o>())</span>
                <span class=o>.</span><span class=na>flatMapMany</span><span class=o>(</span><span class=nl>Flux:</span><span class=o>:</span><span class=n>fromArray</span><span class=o>)</span>
                <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=nl>File:</span><span class=o>:</span><span class=n>toPath</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></td></tr></tbody></table></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Breadth-first traversal: explores directories level by level using <code>expand</code> operator.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Depth-first traversal: explores directories deeply along each branch using <code>expandDeep</code> operator.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Lists all paths within a directory and emits them as a reactive stream.</td></tr></tbody></table></div></div><div class=sect2><h3 id=_understanding_the_implementation>4.2. Understanding the Implementation</h3><div class=sect3><h4 id=_expand_method>4.2.1. expand Method</h4><div class=paragraph><p>The <code>expand</code> method implements breadth-first traversal:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=java><span class=k>return</span> <span class=nc>Mono</span><span class=o>.</span><span class=na>justOrEmpty</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
    <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=nl>Files:</span><span class=o>:</span><span class=n>isDirectory</span><span class=o>)</span>
    <span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=nl>ReactorFileUtils:</span><span class=o>:</span><span class=n>listPaths</span><span class=o>);</span></code></pre></div></div><div class=ulist><ul><li><p>Creates a <code>Mono</code> from the input path</p></li><li><p>Filters to ensure it’s a directory</p></li><li><p>Uses <code>expand</code> to recursively list paths, processing each level completely before moving deeper</p></li></ul></div></div><div class=sect3><h4 id=_expanddeep_method>4.2.2. expandDeep Method</h4><div class=paragraph><p>The <code>expandDeep</code> method implements depth-first traversal:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=java><span class=k>return</span> <span class=nc>Mono</span><span class=o>.</span><span class=na>justOrEmpty</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
    <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=nl>Files:</span><span class=o>:</span><span class=n>isDirectory</span><span class=o>)</span>
    <span class=o>.</span><span class=na>expandDeep</span><span class=o>(</span><span class=nl>ReactorFileUtils:</span><span class=o>:</span><span class=n>listPaths</span><span class=o>);</span></code></pre></div></div><div class=ulist><ul><li><p>Creates a <code>Mono</code> from the input path</p></li><li><p>Filters to ensure it’s a directory</p></li><li><p>Uses <code>expandDeep</code> to recursively explore each branch fully before backtracking</p></li></ul></div></div><div class=sect3><h4 id=_listpaths_method>4.2.3. listPaths Method</h4><div class=paragraph><p>The <code>listPaths</code> method provides the expansion logic:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=java><span class=k>return</span> <span class=nc>Mono</span><span class=o>.</span><span class=na>justOrEmpty</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
    <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=nl>Files:</span><span class=o>:</span><span class=n>isDirectory</span><span class=o>)</span>
    <span class=o>.</span><span class=na>mapNotNull</span><span class=o>(</span><span class=n>directory</span> <span class=o>-&gt;</span> <span class=n>directory</span><span class=o>.</span><span class=na>toFile</span><span class=o>().</span><span class=na>listFiles</span><span class=o>())</span>
    <span class=o>.</span><span class=na>flatMapMany</span><span class=o>(</span><span class=nl>Flux:</span><span class=o>:</span><span class=n>fromArray</span><span class=o>)</span>
    <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=nl>File:</span><span class=o>:</span><span class=n>toPath</span><span class=o>);</span></code></pre></div></div><div class=ulist><ul><li><p>Creates a <code>Mono</code> from the path</p></li><li><p>Filters directories only</p></li><li><p>Lists all files in the directory</p></li><li><p>Converts the array to a <code>Flux</code></p></li><li><p>Maps each <code>File</code> to a <code>Path</code></p></li></ul></div></div></div></div></div><div class=sect1><h2 id=_testing>5. Testing</h2><div class=sectionbody><div class=sect2><h3 id=_test_structure>5.1. Test Structure</h3><div class=paragraph><p>The tests use <code>StepVerifier</code> from <code>reactor-test</code> to verify the traversal order:</p></div><div class=listingblock><div class=title>ReactorFileUtilsTest.java</div><div class=content><pre class="rouge highlight"><code data-lang=java><table class=linenotable><tbody><tr><td class="linenos gl"><pre class=lineno> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
</pre></td><td class=code><pre><span class=kn>package</span> <span class=nn>com.maoudia</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>org.junit.jupiter.api.Test</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>reactor.core.publisher.Flux</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>reactor.test.StepVerifier</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.nio.file.Path</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.Paths</span><span class=o>;</span>

<span class=kd>class</span> <span class=nc>ReactorFileUtilsTest</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=nc>Path</span> <span class=no>ROOT_DIRECTORY</span> <span class=o>=</span> <span class=nc>Paths</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;src/test/resources&#34;</span><span class=o>);</span>

    <span class=nd>@Test</span>
    <span class=kt>void</span> <span class=nf>expand_ValidPath_ReturnsExpectedPaths</span><span class=o>()</span> <span class=o>{</span> <i class=conum data-value=1></i><b>(1)</b>
        <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=n>pathFlux</span> <span class=o>=</span> <span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=no>ROOT_DIRECTORY</span><span class=o>);</span>

        <span class=nc>StepVerifier</span><span class=o>.</span><span class=na>create</span><span class=o>(</span><span class=n>pathFlux</span><span class=o>)</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;resources&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;file2.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;file1.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subdirectory&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;emptydirectory&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subfile1.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subfile2.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subsubdirectory&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subsubfile1.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subsubfile2.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>verifyComplete</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=nd>@Test</span>
    <span class=kt>void</span> <span class=nf>expand_NullPath_ReturnsEmptyFlux</span><span class=o>()</span> <span class=o>{</span> <i class=conum data-value=2></i><b>(2)</b>
        <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=n>pathFlux</span> <span class=o>=</span> <span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=kc>null</span><span class=o>);</span>

        <span class=nc>StepVerifier</span><span class=o>.</span><span class=na>create</span><span class=o>(</span><span class=n>pathFlux</span><span class=o>)</span>
                <span class=o>.</span><span class=na>verifyComplete</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=nd>@Test</span>
    <span class=kt>void</span> <span class=nf>expandDeep_ValidPath_ReturnsExpectedPaths</span><span class=o>()</span> <span class=o>{</span> <i class=conum data-value=3></i><b>(3)</b>
        <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=n>pathFlux</span> <span class=o>=</span> <span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expandDeep</span><span class=o>(</span><span class=no>ROOT_DIRECTORY</span><span class=o>);</span>

        <span class=nc>StepVerifier</span><span class=o>.</span><span class=na>create</span><span class=o>(</span><span class=n>pathFlux</span><span class=o>)</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;resources&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;file2.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;file1.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subdirectory&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subfile1.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subfile2.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subsubdirectory&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subsubfile1.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subsubfile2.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;emptydirectory&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>verifyComplete</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=nd>@Test</span>
    <span class=kt>void</span> <span class=nf>expandDeep_NullPath_ReturnsEmptyFlux</span><span class=o>()</span> <span class=o>{</span> <i class=conum data-value=4></i><b>(4)</b>
        <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=n>pathFlux</span> <span class=o>=</span> <span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=kc>null</span><span class=o>);</span>

        <span class=nc>StepVerifier</span><span class=o>.</span><span class=na>create</span><span class=o>(</span><span class=n>pathFlux</span><span class=o>)</span>
                <span class=o>.</span><span class=na>verifyComplete</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=nd>@Test</span>
    <span class=kt>void</span> <span class=nf>listFiles_ValidDirectory_ReturnsExpectedPaths</span><span class=o>()</span> <span class=o>{</span> <i class=conum data-value=5></i><b>(5)</b>
        <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=n>pathFlux</span> <span class=o>=</span> <span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>listPaths</span><span class=o>(</span><span class=no>ROOT_DIRECTORY</span><span class=o>);</span>

        <span class=nc>StepVerifier</span><span class=o>.</span><span class=na>create</span><span class=o>(</span><span class=n>pathFlux</span><span class=o>)</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;file2.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;file1.txt&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;subdirectory&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>expectNextMatches</span><span class=o>(</span><span class=n>path</span> <span class=o>-&gt;</span> <span class=n>path</span><span class=o>.</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;emptydirectory&#34;</span><span class=o>))</span>
                <span class=o>.</span><span class=na>verifyComplete</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=nd>@Test</span>
    <span class=kt>void</span> <span class=nf>listFiles_NullPath_ReturnsEmptyFlux</span><span class=o>()</span> <span class=o>{</span> <i class=conum data-value=6></i><b>(6)</b>
        <span class=nc>Flux</span><span class=o>&lt;</span><span class=nc>Path</span><span class=o>&gt;</span> <span class=n>pathFlux</span> <span class=o>=</span> <span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>listPaths</span><span class=o>(</span><span class=kc>null</span><span class=o>);</span>

        <span class=nc>StepVerifier</span><span class=o>.</span><span class=na>create</span><span class=o>(</span><span class=n>pathFlux</span><span class=o>)</span>
                <span class=o>.</span><span class=na>verifyComplete</span><span class=o>();</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></td></tr></tbody></table></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Tests breadth-first traversal, verifying that paths are emitted level by level.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Tests null path handling for <code>expand</code> method, expecting an empty flux.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Tests depth-first traversal, verifying that paths are emitted branch by branch.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Tests null path handling for <code>expandDeep</code> method, expecting an empty flux.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Tests listing immediate children of a directory without recursion.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Tests null path handling for <code>listPaths</code> method, expecting an empty flux.</td></tr></tbody></table></div></div><div class=sect2><h3 id=_test_directory_structure>5.2. Test Directory Structure</h3><div class=paragraph><p>The tests assume the following directory structure in <code>src/test/resources</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=text>resources/
├── file1.txt
├── file2.txt
├── emptydirectory/
└── subdirectory/
    ├── subfile1.txt
    ├── subfile2.txt
    └── subsubdirectory/
        ├── subsubfile1.txt
        └── subsubfile2.txt</code></pre></div></div></div><div class=sect2><h3 id=_observing_traversal_differences>5.3. Observing Traversal Differences</h3><div class=paragraph><p>Notice the difference in traversal order between the two tests:</p></div><div class=paragraph><p><strong>Breadth-First (expand):</strong></p></div><div class=listingblock><div class=content><pre>resources → file2.txt → file1.txt → subdirectory → emptydirectory
         → subfile1.txt → subfile2.txt → subsubdirectory
         → subsubfile1.txt → subsubfile2.txt</pre></div></div><div class=paragraph><p><strong>Depth-First (expandDeep):</strong></p></div><div class=listingblock><div class=content><pre>resources → file2.txt → file1.txt → subdirectory
         → subfile1.txt → subfile2.txt → subsubdirectory
         → subsubfile1.txt → subsubfile2.txt → emptydirectory</pre></div></div><div class=paragraph><p>The key difference: <code>emptydirectory</code> appears earlier in breadth-first (same level as <code>subdirectory</code>) but later in depth-first (after fully exploring <code>subdirectory</code>).</p></div></div></div></div><div class=sect1><h2 id=_use_cases_and_recommendations>6. Use Cases and Recommendations</h2><div class=sectionbody><div class=sect2><h3 id=_when_to_use_breadth_first_expand>6.1. When to Use Breadth-First (expand)</h3><div class=ulist><ul><li><p><strong>Finding files at specific depths:</strong> When you need to process all files at a certain level before going deeper</p></li><li><p><strong>Memory efficiency:</strong> When exploring very deep hierarchies where depth-first might cause stack issues</p></li><li><p><strong>Immediate neighbor processing:</strong> When you need to process files closest to the root first</p></li><li><p><strong>Load balancing:</strong> When distributing work across multiple levels</p></li></ul></div></div><div class=sect2><h3 id=_when_to_use_depth_first_expanddeep>6.2. When to Use Depth-First (expandDeep)</h3><div class=ulist><ul><li><p><strong>Complete branch exploration:</strong> When you need to fully process one directory tree before moving to siblings</p></li><li><p><strong>Resource cleanup:</strong> When processing requires completing an entire branch before starting another</p></li><li><p><strong>Path-dependent operations:</strong> When operations depend on completing parent-child relationships</p></li><li><p><strong>Search optimization:</strong> When looking for specific files and want to explore paths completely</p></li></ul></div></div></div></div><div class=sect1><h2 id=_best_practices>7. Best Practices</h2><div class=sectionbody><div class=sect2><h3 id=_error_handling>7.1. Error Handling</h3><div class=paragraph><p>Add proper error handling to the reactive chain:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=java><span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
    <span class=o>.</span><span class=na>onErrorResume</span><span class=o>(</span><span class=nc>IOException</span><span class=o>.</span><span class=na>class</span><span class=o>,</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=o>{</span>
        <span class=n>log</span><span class=o>.</span><span class=na>error</span><span class=o>(</span><span class=s>&#34;Failed to traverse directory&#34;</span><span class=o>,</span> <span class=n>e</span><span class=o>);</span>
        <span class=k>return</span> <span class=nc>Flux</span><span class=o>.</span><span class=na>empty</span><span class=o>();</span>
    <span class=o>})</span>
    <span class=o>.</span><span class=na>subscribe</span><span class=o>();</span></code></pre></div></div></div><div class=sect2><h3 id=_backpressure_management>7.2. Backpressure Management</h3><div class=paragraph><p>For large directory structures, consider using backpressure operators:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=java><span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
    <span class=o>.</span><span class=na>limitRate</span><span class=o>(</span><span class=mi>100</span><span class=o>)</span>
    <span class=o>.</span><span class=na>onBackpressureBuffer</span><span class=o>(</span><span class=mi>1000</span><span class=o>)</span>
    <span class=o>.</span><span class=na>subscribe</span><span class=o>();</span></code></pre></div></div></div><div class=sect2><h3 id=_resource_management>7.3. Resource Management</h3><div class=paragraph><p>Ensure proper resource cleanup when working with file streams:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=java><span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
    <span class=o>.</span><span class=na>doOnCancel</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=n>log</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;Traversal cancelled&#34;</span><span class=o>))</span>
    <span class=o>.</span><span class=na>doFinally</span><span class=o>(</span><span class=n>signalType</span> <span class=o>-&gt;</span> <span class=n>log</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;Traversal completed: {}&#34;</span><span class=o>,</span> <span class=n>signalType</span><span class=o>))</span>
    <span class=o>.</span><span class=na>subscribe</span><span class=o>();</span></code></pre></div></div></div><div class=sect2><h3 id=_filtering_and_transformation>7.4. Filtering and Transformation</h3><div class=paragraph><p>Combine traversal with filtering and transformation:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=java><span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
    <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>p</span> <span class=o>-&gt;</span> <span class=n>p</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>endsWith</span><span class=o>(</span><span class=s>&#34;.txt&#34;</span><span class=o>))</span>
    <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=nl>Path:</span><span class=o>:</span><span class=n>getFileName</span><span class=o>)</span>
    <span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=nc>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=_performance_considerations>8. Performance Considerations</h2><div class=sectionbody><div class=sect2><h3 id=_memory_usage>8.1. Memory Usage</h3><div class=ulist><ul><li><p><strong>Breadth-first:</strong> Uses more memory as it needs to keep track of all nodes at the current level</p></li><li><p><strong>Depth-first:</strong> Uses less memory but may have deeper recursion stacks</p></li></ul></div></div><div class=sect2><h3 id=_processing_speed>8.2. Processing Speed</h3><div class=ulist><ul><li><p><strong>Breadth-first:</strong> Better for parallel processing of same-level items</p></li><li><p><strong>Depth-first:</strong> Better for sequential processing of complete branches</p></li></ul></div></div><div class=sect2><h3 id=_cancellation>8.3. Cancellation</h3><div class=paragraph><p>Both strategies support cancellation through Reactor’s subscription mechanism:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=java><span class=nc>Disposable</span> <span class=n>subscription</span> <span class=o>=</span> <span class=nc>ReactorFileUtils</span><span class=o>.</span><span class=na>expand</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
    <span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=nc>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>

<span class=n>subscription</span><span class=o>.</span><span class=na>dispose</span><span class=o>();</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=_comparison_summary>9. Comparison Summary</h2><div class=sectionbody><table class="tableblock frame-all grid-all stretch"><col style=width:20%><col style=width:40%><col style=width:40%><thead><tr><th class="tableblock halign-left valign-top">Aspect</th><th class="tableblock halign-left valign-top">Breadth-First (expand)</th><th class="tableblock halign-left valign-top">Depth-First (expandDeep)</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Traversal Order</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Level by level</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Branch by branch</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Processing</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Immediate neighbors first</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Complete branch exploration</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Memory Usage</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Higher (stores level nodes)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Lower (recursive depth)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Use Case</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Level-based operations</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Branch-based operations</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Best For</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Finding files at specific depths</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Complete directory processing</p></td></tr></tbody></table></div></div><div class=sect1><h2 id=_conclusion>10. Conclusion</h2><div class=sectionbody><div class=paragraph><p>Understanding the difference between breadth-first and depth-first traversal is crucial for efficient reactive directory exploration. Project Reactor’s <code>expand</code> and <code>expandDeep</code> operators provide powerful tools for implementing these strategies in a non-blocking, reactive manner.</p></div><div class=paragraph><p>Key takeaways:</p></div><div class=ulist><ul><li><p>Use <code>expand</code> (breadth-first) when you need to process directories level by level</p></li><li><p>Use <code>expandDeep</code> (depth-first) when you need to fully explore branches before moving on</p></li><li><p>Both strategies integrate seamlessly with Reactor’s reactive programming model</p></li><li><p>Choose the appropriate strategy based on your specific use case and requirements</p></li></ul></div><div class=paragraph><p>The complete source code is available on <a href=https://gist.github.com/aoudiamoncef/87e33e2e21592d8cebc78ffa17c87438>GitHub Gist</a>.</p></div></div></div><div class=sect1><h2 id=_resources>11. Resources</h2><div class=sectionbody><div class=ulist><ul><li><p><a href=https://www.vinsguru.com/flux-expand-vs-expanddeep/>Flux Expand vs ExpandDeep Tutorial</a></p></li><li><p><a href=https://projectreactor.io/docs/core/release/reference/>Project Reactor Reference Guide</a></p></li><li><p><a href=https://javadoc.io/doc/io.projectreactor/reactor-core/latest/index.html>Reactor Core Javadoc</a></p></li><li><p><a href=https://projectreactor.io/docs/test/release/api/>Reactor Test Documentation</a></p></li></ul></div></div></div></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=https://www.maoudia.com/tags/java/>Java</a>
<a href=https://www.maoudia.com/tags/reactor/>Reactor</a>
<a href=https://www.maoudia.com/tags/reactive-programming/>Reactive Programming</a>
<a href=https://www.maoudia.com/tags/project-reactor/>Project Reactor</a>
<a href=https://www.maoudia.com/tags/file-system/>File System</a></div></div></div></article></div><div id=webmentions-container><script src=https://www.maoudia.com/js/webmention.min.js integrity=sha384-jpBjl7uFXhBwC/Pl3XF47lKziQiVigVJCtlg1xu0m3tqSlKzWyv5DzHnIQWWTakS data-id=webmention-container crossorigin=anonymous async></script><div id=webmentions></div></div><div id=comments-container><script src=https://giscus.app/client.js data-repo=maoudia/discussions.maoudia.com data-repo-id=R_kgDOGX153A data-category=General data-category-id=DIC_kwDOGX153M4B_2Vz data-mapping=og:title data-reactions-enabled=1 data-emit-metadata data-theme=light data-input-position=bottom data-loading=lazy data-lang=en crossorigin=anonymous async></script><div id=giscus></div></div></div><footer><div class=container><div class=categories><a href=/categories/ alt=Categories><strong>Categories</strong></a><ul><li><a href=/categories/tutorial alt=Tutorial>Tutorial
(5)</a></li><li><a href=/categories/reactive-programming alt="Reactive programming">Reactive programming
(3)</a></li></ul></div><div class=series><a href=/series/><strong>Series</strong></a><ul><li><a href=/series/mongodb-reactive-cli>Mongodb reactive CLI
(1)</a></li></ul></div><div class=right><div class=external-profiles><strong>Find me on</strong>
<a href=https://twitter.com/aoudiamoncef title="Moncef AOUDIA Twitter" target=_blank rel="noopener noreferrer"><i class="fab fa-twitter"></i></a>
<a href=https://github.com/aoudiamoncef title="Moncef AOUDIA Github" target=_blank rel="noopener noreferrer"><i class="fab fa-github"></i></a>
<a href=https://gitlab.com/aoudiamoncef title="Moncef AOUDIA Gitlab" target=_blank rel="noopener noreferrer"><i class="fab fa-gitlab"></i></a>
<a href=https://www.linkedin.com/in/moncef-aoudia-7723b311b title="Moncef AOUDIA Linkedin" target=_blank rel="noopener noreferrer"><i class="fab fa-linkedin"></i></a>
<a href=mailto:mf.aoudia@gmail.com title="Moncef AOUDIA Gmail" target=_blank rel="noopener noreferrer"><i class="fas fa-envelope"></i></a>
<a href=https://www.clubhouse.com/@aoudiamoncef title="Moncef AOUDIA Clubhouse" target=_blank rel="noopener noreferrer"><i class="far fa-copyright"></i></a>
<a href=https://discordapp.com/users/365160200900182026 title="Moncef AOUDIA Discord" target=_blank rel="noopener noreferrer"><i class="fab fa-discord"></i></a>
<a href=https://getpocket.com/@701dbpd1T08b8g7f59Ab790A73g1T0G2725K38yf75eym1w2di86eN27V2dIJ51a title="Moncef AOUDIA Pocket" target=_blank rel="noopener noreferrer"><i class="fab fa-get-pocket"></i></a>
<a href=https://dev.to/aoudiamoncef title="Moncef AOUDIA DEV.TO" target=_blank rel="noopener noreferrer"><i class="fab fa-dev"></i></a>
<a href=https://medium.com/@aoudiamoncef title="Moncef AOUDIA Medium" target=_blank rel="noopener noreferrer"><i class="fab fa-medium-m"></i></a>
<a href=https://aoudiamoncef.hashnode.dev title="Moncef AOUDIA Hashnode" target=_blank rel="noopener noreferrer"><i class="fas fa-h-square"></i></a>
<a href=https://stackoverflow.com/users/8126192/moncef-aoudia title="Moncef AOUDIA Stackoverflow" target=_blank rel="noopener noreferrer"><i class="fab fa-stack-overflow"></i></a>
<a href=https://www.quora.com/profile/Moncef-AOUDIA title="Moncef AOUDIA Quora" target=_blank rel="noopener noreferrer"><i class="fab fa-quora"></i></a>
<a href=https://www.reddit.com/user/aoudiamoncef title="Moncef AOUDIA Reddit" target=_blank rel="noopener noreferrer"><i class="fab fa-reddit"></i></a>
<a href=https://slides.com/aoudiamoncef title="Moncef AOUDIA Slides" target=_blank rel="noopener noreferrer"><i class="fas fa-sliders-h"></i></a>
<a href=https://speakerdeck.com/aoudiamoncef title="Moncef AOUDIA SpeakerDeck" target=_blank rel="noopener noreferrer"><i class="fab fa-speaker-deck"></i></a>
<a href=/index.xml title="Moncef AOUDIA RSS" target=_blank rel="noopener noreferrer"><i class="fas fa-rss"></i></a></div><div class=languages><strong>Other languages</strong>
<a href=https://www.maoudia.com/ class=active>en</a>
<span>| </span><a href=https://www.maoudia.com/fr/>fr</a></div></div></div></footer><div class=credits><div class=container><div class=copyright><a href=https://creativecommons.org/licenses/by-sa/4.0 target=_blank rel=noopener>&copy;
2025
Moncef AOUDIA</a></div><div class=author><a href=https://github.com/Lednerb/bilberry-hugo-theme target=_blank rel=noopener>Bilberry Hugo Theme</a></div></div></div><script type=text/javascript src=https://www.maoudia.com/js/theme.min.js crossorigin=anonymous defer></script><div id=activate-algolia-search class=hidden><input type=hidden id=algolia-search-appId>
<input type=hidden id=algolia-search-apiKey>
<input type=hidden id=algolia-search-indexName>
<input type=hidden id=algolia-search-noSearchResults value="Nothing found.">
<input type=hidden id=algolia-search-currentLanguageOnly></div><script src=https://www.maoudia.com/js/vanilla-back-to-top.min.js integrity=sha384-vPjvei7c1a3IpCr0kkDEOMRmlCHcv8REJw1B2eKJM55swier62xiYRVistfMKEUj crossorigin=anonymous></script><script>addBackToTop({diameter:48,backgroundColor:"transparent",textColor:"rgb(45, 54, 66)"})</script></body></html>