[{"objectID":"https://www.maoudia.com/categories/reactive%20programming","title":"Reactive programming","type":"category","url":"https://www.maoudia.com/categories/reactive%20programming"},{"objectID":"https://www.maoudia.com/categories/tutorial","title":"Tutorial","type":"category","url":"https://www.maoudia.com/categories/tutorial"},{"objectID":"https://www.maoudia.com/author/moncef-aoudia","title":"Moncef AOUDIA","type":"author","url":"https://www.maoudia.com/author/moncef-aoudia"},{"objectID":"https://www.maoudia.com/tags/best%20practices","title":"Best practices","type":"tag","url":"https://www.maoudia.com/tags/best%20practices"},{"objectID":"https://www.maoudia.com/tags/configuration","title":"Configuration","type":"tag","url":"https://www.maoudia.com/tags/configuration"},{"objectID":"https://www.maoudia.com/tags/docker%20compose","title":"Docker compose","type":"tag","url":"https://www.maoudia.com/tags/docker%20compose"},{"objectID":"https://www.maoudia.com/tags/eip","title":"Eip","type":"tag","url":"https://www.maoudia.com/tags/eip"},{"objectID":"https://www.maoudia.com/tags/error%20handling","title":"Error handling","type":"tag","url":"https://www.maoudia.com/tags/error%20handling"},{"objectID":"https://www.maoudia.com/tags/java","title":"Java","type":"tag","url":"https://www.maoudia.com/tags/java"},{"objectID":"https://www.maoudia.com/tags/mongodb","title":"Mongodb","type":"tag","url":"https://www.maoudia.com/tags/mongodb"},{"objectID":"https://www.maoudia.com/tags/reactor","title":"Reactor","type":"tag","url":"https://www.maoudia.com/tags/reactor"},{"objectID":"https://www.maoudia.com/tags/spring%20boot","title":"Spring boot","type":"tag","url":"https://www.maoudia.com/tags/spring%20boot"},{"objectID":"https://www.maoudia.com/tags/spring%20data","title":"Spring data","type":"tag","url":"https://www.maoudia.com/tags/spring%20data"},{"objectID":"https://www.maoudia.com/tags/spring%20webflux","title":"Spring webflux","type":"tag","url":"https://www.maoudia.com/tags/spring%20webflux"},{"objectID":"https://www.maoudia.com/tags/testcontainers","title":"Testcontainers","type":"tag","url":"https://www.maoudia.com/tags/testcontainers"},{"objectID":"https://www.maoudia.com/tags/visualvm","title":"Visualvm","type":"tag","url":"https://www.maoudia.com/tags/visualvm"},{"objectID":"https://www.maoudia.com/series/mongodb%20reactive%20cli","title":"Mongodb reactive CLI","type":"series","url":"https://www.maoudia.com/series/mongodb%20reactive%20cli"},{"author":"Moncef AOUDIA","categories":["Tutorial"],"content":" Spring Boot provides flexible error handling configuration options that allow you to control what information is exposed in error responses. This is crucial for maintaining security in production while providing detailed debugging information in development environments. This tutorial showcases varying error response behaviors across different deployment profiles using a REST controller that intentionally throws errors for demonstration purposes. Table of contents 1. Error Configuration Options 2. Environment-Specific Profiles 3. Project Setup 4. Application Configuration 5. Implementation 6. Testing Error Responses 7. Best Practices 8. Conclusion 9. Resources 1. Error Configuration Options Spring Boot offers six key configurable error properties that control error response behavior: 1.1. Include Binding Errors Controls visibility of validation errors in form submissions. Default Value: NEVER Possible Values: ALWAYS, NEVER, ON_PARAM Description: Specifies whether binding errors, such as validation errors in form submissions, should be included in error responses. 1.2. Include Exception Toggles detailed exception information in responses. Default Value: false Possible Values: true, false Description: Specifies whether detailed exception information should be included in error responses. 1.3. Include Message Manages error message visibility. Default Value: NEVER Possible Values: ALWAYS, NEVER, ON_PARAM Description: Specifies whether error messages should be included in error responses. 1.4. Include Stack Trace Determines stack trace inclusion in error responses. Default Value: NEVER Possible Values: ALWAYS, NEVER, ON_PARAM Description: Specifies whether stack traces should be included in error responses. 1.5. Error Controller Path Default location for error handling. Default Value: /error Possible Values: Any valid URL path Description: Defines the path of the error controller, which handles error requests. 1.6. Whitelabel Error Page Enables or disables the default error page displayed in browsers. Default Value: true Possible Values: true, false Description: Specifies whether to enable the default Whitelabel Error Page displayed in browsers in case of a server error. Understanding the configuration values: ALWAYS: Always include or enable the corresponding attribute or feature. NEVER: Never include or enable the corresponding attribute or feature. ON_PARAM: Include or enable the corresponding attribute or feature based on the presence of a specific query parameter. 2. Environment-Specific Profiles 2.1. Development Environment Configuration for development profiles (local, test, dev): Include Binding Errors: ALWAYS Include Exception: true Include Message: ALWAYS Include Stack Trace: ALWAYS All error details are included to facilitate debugging and development. 2.2. QA and Staging Environment Configuration for QA and staging profiles: Include Binding Errors: ON_PARAM Include Exception: true Include Message: ON_PARAM Include Stack Trace: ON_PARAM Details are shown conditionally via query parameters (e.g., ?trace=true). 2.3. Production Environment Configuration for production profile: Whitelabel Error Page Enabled: false Whitelabel error page is disabled for security, omitting sensitive details entirely. 3. Project Setup 3.1. Requirements OpenJDK 21.0.x Maven 3.9.x Spring Boot 3.2.3 3.2. Maven Configuration The project uses Spring Boot 3.2.3 with Java 21. pom.xml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;project xmlns=\u0026#34;http://maven.apache.org/POM/4.0.0\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\u0026#34;\u0026gt; \u0026lt;modelVersion\u0026gt;4.0.0\u0026lt;/modelVersion\u0026gt; \u0026lt;parent\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-parent\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.2.3\u0026lt;/version\u0026gt; \u0026lt;relativePath/\u0026gt; \u0026lt;!-- lookup parent from repository --\u0026gt; \u0026lt;/parent\u0026gt; \u0026lt;groupId\u0026gt;com.maoudia\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;app\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;0.0.1-SNAPSHOT\u0026lt;/version\u0026gt; \u0026lt;name\u0026gt;maoudia-app\u0026lt;/name\u0026gt; \u0026lt;description\u0026gt;MAOUDIA APP\u0026lt;/description\u0026gt; \u0026lt;properties\u0026gt; \u0026lt;maven.compiler.source\u0026gt;21\u0026lt;/maven.compiler.source\u0026gt; \u0026lt;maven.compiler.target\u0026gt;21\u0026lt;/maven.compiler.target\u0026gt; \u0026lt;project.build.sourceEncoding\u0026gt;UTF-8\u0026lt;/project.build.sourceEncoding\u0026gt; \u0026lt;/properties\u0026gt; \u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-test\u0026lt;/artifactId\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; \u0026lt;build\u0026gt; \u0026lt;plugins\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;/plugin\u0026gt; \u0026lt;/plugins\u0026gt; \u0026lt;/build\u0026gt; \u0026lt;/project\u0026gt; 4. Application Configuration 4.1. Error Configuration The application configuration demonstrates profile-based error handling settings. application.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 server: port: 8080 error: include-binding-errors: NEVER include-exception: OFF include-message: NEVER include-stacktrace: NEVER path: /error whitelabel: enabled: ON spring: application: name: app --- spring.config.activate.on-profile: local, test, dev server: error: include-binding-errors: ALWAYS include-exception: ON include-message: ALWAYS include-stacktrace: ALWAYS --- spring.config.activate.on-profile: qa, staging server: error: include-binding-errors: ON_PARAM include-exception: ON include-message: ON_PARAM include-stacktrace: ON_PARAM --- spring.config.activate.on-profile: prod server: error: whitelabel: enabled: OFF 5. Implementation 5.1. Error Resource Controller We create a REST controller with an endpoint that intentionally throws errors to showcase error handling behavior. ErrorResource.java 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 package com.maoudia; import org.springframework.http.ResponseEntity; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RestController; @RestController public class ErrorResource { /** * Endpoint to intentionally throw an error. * * @return ResponseEntity containing an error message */ @GetMapping(\u0026#34;/throw\u0026#34;) public ResponseEntity\u0026lt;String\u0026gt; throwError() { // Simulate an error by throwing a RuntimeException throw new RuntimeException(\u0026#34;This endpoint always throws an error.\u0026#34;); } } 6. Testing Error Responses 6.1. Default Configuration Request without any specific profile: 1 curl -X GET http://localhost:8080/throw Response: 1 2 3 4 5 6 { \u0026#34;timestamp\u0026#34;: \u0026#34;2024-02-27T10:10:03.310+00:00\u0026#34;, \u0026#34;status\u0026#34;: 500, \u0026#34;error\u0026#34;: \u0026#34;Internal Server Error\u0026#34;, \u0026#34;path\u0026#34;: \u0026#34;/throw\u0026#34; } Notice that no sensitive information is exposed in the default configuration. 6.2. Staging Profile with Query Parameter Request with staging profile and trace=true parameter: 1 curl -X GET http://localhost:8080/throw?trace=true Response: 1 2 3 4 5 6 7 8 { \u0026#34;timestamp\u0026#34;: \u0026#34;2024-02-27T10:16:25.951+00:00\u0026#34;, \u0026#34;status\u0026#34;: 500, \u0026#34;error\u0026#34;: \u0026#34;Internal Server Error\u0026#34;, \u0026#34;exception\u0026#34;: \u0026#34;java.lang.RuntimeException\u0026#34;, \u0026#34;trace\u0026#34;: \u0026#34;java.lang.RuntimeException: This endpoint always throws an error.\\n\\tat com.maoudia.ErrorResource.throwError(ErrorResource.java:18)\\n\\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\\n\\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\\n...\u0026#34;, \u0026#34;path\u0026#34;: \u0026#34;/throw\u0026#34; } With the trace=true query parameter in staging environment, the full stack trace is returned for debugging purposes. 6.3. Development Profile When running with development profiles (local, test, dev), all error details are automatically included without requiring query parameters. 6.4. Production Profile In production, the whitelabel error page is disabled, and production requests omit sensitive details entirely, returning only the minimal error information. Enable each profile (e.g., local, test, dev, qa, staging, prod) in your Spring Boot application to see the respective error handling behavior. You can activate a profile using: Command line: --spring.profiles.active=staging Environment variable: SPRING_PROFILES_ACTIVE=staging application.yml: spring.profiles.active=staging 7. Best Practices 7.1. Security Considerations Never expose stack traces in production - They can reveal internal application structure and potential security vulnerabilities. Use conditional disclosure - In staging/QA environments, use ON_PARAM to allow developers to see details only when needed. Disable whitelabel page in production - Custom error pages provide better user experience and don’t expose Spring Boot information. 7.2. Development Efficiency Enable all details in development - Use ALWAYS settings to facilitate debugging. Consistent environment naming - Use clear profile names (dev, qa, staging, prod) across all projects. Document query parameters - Make sure developers know about the ?trace=true option in non-production environments. 7.3. Monitoring and Logging While limiting error details in responses is important for security, ensure comprehensive error logging is enabled in all environments for monitoring and troubleshooting purposes. 8. Conclusion Proper error handling configuration is essential for maintaining security while providing useful debugging information. By leveraging Spring Boot’s profile-based configuration, you can: Expose detailed error information in development environments Provide conditional access to error details in staging/QA Maintain security by limiting error exposure in production Improve developer experience without compromising security The complete source code is available on GitHub Gist. 9. Resources Spring Boot ErrorProperties Documentation Spring Boot Application Properties - Server Section Complete Guide to Exception Handling in Spring Boot Spring Boot Error Handling Reference ","language":"en","objectID":"405a1f2e17d1b6e7343ec643c1cc5f46","tags":["Java","Spring Boot","Error Handling","Configuration","Best Practices"],"title":"Spring Boot Error Server Configuration","type":"code","url":"https://www.maoudia.com/code/spring-boot-error-server-configuration/"},{"author":"Moncef AOUDIA","categories":["Tutorial","Reactive Programming"],"content":" Afin de mettre à jour les documents d’une collection MongoDB, on passe souvent par des requêtes de mise à jour, si le volume des données est conséquent, cela peut conduire à des problèmes de performance et une surconsommation des ressources matérielles. On va implémenter une solution pour enrichir et mettre à jour efficacement un grand volume de données en utilisant Spring Data MongoDB Reactive. Sommaire 1. EIP enrichisseur de contenu 1.1. Flux d’intégration 2. Configuration du projet 2.1. Prérequis 2.2. Génération 2.3. Structure 2.4. Conteneurs 2.5. Initialisation des données 3. Application 3.1. Configuration 3.2. Implémentation 3.3. Démo 3.4. Rapport VisuelVM 4. Tests d’intégration 5. Conclusion 6. Ressources Avant de continuer la lecture, si vous n’êtes pas familier avec la pile réactive de Spring et MongoDB, je suggère de consulter la section ressources. 1. EIP enrichisseur de contenu Le modèle d’intégration d’entreprise enrichisseur de contenu permet d’ajouter des informations à un message existant depuis une source externe. Il utilise les informations contenues dans le message entrant pour effectuer l’opération d’enrichissement. On va implémenter une version simplifiée de l\u0026#39;EIP : Message en entrée : représenté par un document MongoDB. Enrichisseur : notre application. Ressource : appel à une API RESTful. Message en sortie : nous ne conserverons que le document enrichi. 1.1. Flux d’intégration L’application va lire les documents adresse, ajouter le produit et sauvegarder les documents enrichis dans la base MongoDB. 2. Configuration du projet 2.1. Prérequis OpenJDK 21.0.x Maven 3.9.x Docker Compose 2.23.x MongoDB Database Tools 100.9.x 2.2. Génération On génère le squelette du projet depuis ","language":"fr","objectID":"c5e2c9df3707312de51b5d12a9fb99db","tags":["EIP","Java","Reactor","MongoDB","Spring Boot","Spring Data","Spring WebFlux","Docker Compose","TestContainers","VisualVM"],"title":"Mise À Jour En Masse Avec Spring Data MongoDB Reactive","type":"article","url":"https://www.maoudia.com/fr/blog/mise-a-jour-en-masse-avec-spring-data-mongodb-reactive/"},{"author":"Moncef AOUDIA","categories":["Tutorial","Reactive Programming"],"content":" In order to update documents in a MongoDB collection, we often use update requests, if the volume of data is too large, it could lead to performance issues and overconsumption of hardware resources. We will implement a solution to enrich and update efficiently a large amount of data using Spring Data MongoDB Reactive. Table of contents 1. EIP content enricher 1.1. Integration flow 2. Project setup 2.1. Requirements 2.2. Generation 2.3. Structure 2.4. Containers 2.5. Data initialization 3. Application 3.1. Configuration 3.2. Implementation 3.3. Demo 3.4. VisuelVM report 4. Integration tests 5. Conclusion 6. Resources Before continuing the reading, if you are not familiar with Spring reactive stack and MongoDB, I suggest you to check the resources section. 1. EIP content enricher Enterprise Integration Pattern Content Enricher appends information to an existing message from an external source. It uses information inside the incoming message to perform the enrichment operation. We will implement a simplified version of the EIP : Input message : represented by a MongoDB document. Enricher : our application. Resource : call to a RESTful API. Output message : we will keep only the enriched document. 1.1. Integration flow The application will read the address documents, add the product and save the enriched documents to the MongoDB database. 2. Project setup 2.1. Requirements OpenJDK 21.0.x Maven 3.9.x Docker Compose 2.23.x MongoDB Database Tools 100.9.x 2.2. Generation We generate the project skeleton from ","language":"en","objectID":"49f0bf334f1906ce110e7c468e4d44fa","tags":["EIP","Java","Reactor","MongoDB","Spring Boot","Spring Data","Spring WebFlux","Docker Compose","TestContainers","VisualVM"],"title":"Bulk Update With Spring Data MongoDB Reactive","type":"article","url":"https://www.maoudia.com/blog/bulk-update-with-spring-data-mongodb-reactive/"},{"author":null,"categories":null,"content":"","language":"fr","objectID":"af1f941b6171f8ad8c4635f399406115","tags":null,"title":"Hors ligne","type":"offline","url":"https://www.maoudia.com/fr/offline/"},{"author":null,"categories":null,"content":"","language":"en","objectID":"aed2288437af4cb2dc389424e0c47a4c","tags":null,"title":"Offline","type":"offline","url":"https://www.maoudia.com/offline/"}]